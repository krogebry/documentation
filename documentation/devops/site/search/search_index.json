{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Index page","text":"<p>DevOps documentation page.</p>"},{"location":"tips-and-tricks/","title":"Tips and Tricks","text":"<p>Stuff </p>"},{"location":"tips-and-tricks/k8s/","title":"Overview","text":"<p>Overview stuff</p>"},{"location":"tips-and-tricks/k8s/#bash-shortcuts","title":"Bash shortcuts","text":"<p>Thanks to Stefan Gloutnikov for this little gem:</p> <pre><code># Impersonate -admin in Kubie namespace\nkubieKubectlAsAdmin() {\nKUBENS=$(cat $KUBIE_KUBECONFIG | yq '.contexts[0].context.namespace')\nkubectl $(echo \"$@\") --as $KUBENS-admin\n}\nalias ka='kubieKubectlAsAdmin'\n</code></pre> <p>Put this into your <code>~/.zshrc</code> or <code>~/.bashrc</code> and use as such:</p> <pre><code>ka port-forward svc/service-name 8080:8080\n</code></pre> <p><code>port-forward</code> requires admin permissions, so <code>ka</code> will do that for you as a one-off from your normal commands.</p> <p>You can also use this for various other commands like secrets:</p> <pre><code>ka get secrets\n</code></pre>"},{"location":"tips-and-tricks/k8s/#helm","title":"Helm","text":"<p>In the case of a helm deployment, you might have to use something slightly different:</p> <pre><code># Impersonate -admin in Kubie namespace\nkubieHelmAsAdmin() {\nKUBENS=$(cat $KUBIE_KUBECONFIG | yq '.contexts[0].context.namespace')\nhelm --as-kube-user $KUBENS-admin $(echo \"$@\") }\nalias ha='kubieHelmAsAdmin'\n</code></pre> <p>And use like this to list helm charts:</p> <pre><code>ha list </code></pre>"},{"location":"tips-and-tricks/k8s/#events","title":"Events","text":"<p>Another handy trick is to use something you'll see me use quite often:</p> <pre><code>alias kge='kubectl get events --sort-by='\\''{.lastTimestamp}'\\'''\n</code></pre> <p>This will sort events from the event log, giving you the most recent first.</p>"},{"location":"tips-and-tricks/k8s/#autocomplete","title":"Autocomplete","text":"<p>This snippet enables <code>kubectl</code> autocomplete ( tab out ) and an alias for <code>k</code> <pre><code>source &lt;(kubectl completion zsh)\nalias k=kubectl\ncomplete -F __start_kubectl k\n</code></pre></p> <p>It might not seem like much, but this shortens <code>kubectl</code> to <code>k</code>, and if you're doing a lot of kubectl commands, this can end up being a huge time saver.</p>"}]}