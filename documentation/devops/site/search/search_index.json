{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Index page","text":"<p>DevOps documentation page.</p>"},{"location":"aws/","title":"AWS specific things","text":"<pre><code>aws sts get-caller-identity\n</code></pre>"},{"location":"github/","title":"Overview","text":"<p>Workflows and actions. Both using versioned stuff.</p>"},{"location":"github/#actions","title":"Actions","text":""},{"location":"github/#workflows","title":"Workflows","text":"<p>Collection of shared workflows that call actions</p>"},{"location":"helm/libraries/","title":"Overview","text":"<p>Splitting things out for specific use cases.</p>"},{"location":"helm/testing/","title":"Overview","text":"<p>Using <code>go</code> to test helm charts.</p> <pre><code>graph LR\n  A[Start] --&gt; B[Lint];\n  B --&gt; Deploy[Deploy to K8s];\n  Deploy --&gt; Test[Test];\n  Test --&gt; GoTest[go test];\n  Test --&gt; KubeScore[kube-score];\n  Test --&gt; SecurityScan[wiz scan];\n  GoTest --&gt; Publish[Publish to art];\n  KubeScore --&gt; Publish;\n  SecurityScan --&gt; Publish;</code></pre>"},{"location":"kubernetes/aws-eks/","title":"Update kubeconfig","text":"<pre><code>aws eks update-kube-config\n</code></pre>"},{"location":"kubernetes/opa/","title":"Open Policy Agent","text":"<p>Highly secure k8s.</p>"},{"location":"terraform/","title":"Organization","text":"<p>How to organize stuff</p>"},{"location":"terraform/#aliases","title":"Aliases","text":"<pre><code>alias t=\"/usr/local/bin/terraform\"\n</code></pre> <p>@TODO: <code>tfenv</code></p>"},{"location":"terraform/#modules","title":"Modules","text":"<p>Use versioned modules.</p>"},{"location":"terraform/vault/","title":"Vault","text":"<p>Setting up vault on a managed service.</p>"},{"location":"tips-and-tricks/","title":"Tips and Tricks","text":"<p>Stuff </p>"},{"location":"tips-and-tricks/helm/","title":"Helm repo and https","text":"<p>This URL:</p> <pre><code>https://artifactory.mycooldomain.com/artifactory\n</code></pre> <p>Is different from this URL:</p> <pre><code>https://artifactory.mycooldomain.com:433/artifactory\n</code></pre> <p>Here's the deal, with the <code>:443</code> URL you can authenticate and even scrape the index.  However, you cannot pull down an archive fromt he repo.</p> <p>Apparently the <code>:443</code> has some weird impact on downloads of archives.  The result will be a 401 when trying to  install a chart.</p> <p>However, you won't get the same 401 when updating or authenticating to the repository.</p> <p>Weird, right?  This was not a fun thing to discover.</p>"},{"location":"tips-and-tricks/k8s/","title":"Overview","text":"<p>Various things that have helped me manage k8s environments.</p> <p>Warning</p> <p>Please use kubie!!</p>"},{"location":"tips-and-tricks/k8s/#bash-shortcuts","title":"Bash shortcuts","text":"<p>Thanks to Stefan Gloutnikov for this little gem:</p> <pre><code># Impersonate -admin in Kubie namespace\nkubieKubectlAsAdmin() {\nKUBENS=$(cat $KUBIE_KUBECONFIG | yq '.contexts[0].context.namespace')\nkubectl $(echo \"$@\") --as $KUBENS-admin\n}\nalias ka='kubieKubectlAsAdmin'\n</code></pre> <p>Put this into your <code>~/.zshrc</code> or <code>~/.bashrc</code> and use as such:</p> <pre><code>ka port-forward svc/service-name 8080:8080\n</code></pre> <p><code>port-forward</code> requires admin permissions, so <code>ka</code> will do that for you as a one-off from your normal commands.</p> <p>You can also use this for various other commands like secrets:</p> <pre><code>ka get secrets\n</code></pre>"},{"location":"tips-and-tricks/k8s/#helm","title":"Helm","text":"<p>In the case of a helm deployment, you might have to use something slightly different:</p> <pre><code># Impersonate -admin in Kubie namespace\nkubieHelmAsAdmin() {\nKUBENS=$(cat $KUBIE_KUBECONFIG | yq '.contexts[0].context.namespace')\nhelm --as-kube-user $KUBENS-admin $(echo \"$@\") }\nalias ha='kubieHelmAsAdmin'\n</code></pre> <p>And use like this to list helm charts:</p> <pre><code>ha list </code></pre>"},{"location":"tips-and-tricks/k8s/#events","title":"Events","text":"<p>Another handy trick is to use something you'll see me use quite often:</p> <pre><code>alias kge='kubectl get events --sort-by='\\''{.lastTimestamp}'\\'''\n</code></pre> <p>This will sort events from the event log, giving you the most recent first.</p>"},{"location":"tips-and-tricks/k8s/#autocomplete","title":"Autocomplete","text":"<p>This snippet enables <code>kubectl</code> autocomplete ( tab out ) and an alias for <code>k</code> <pre><code>source &lt;(kubectl completion zsh)\nalias k=kubectl\ncomplete -F __start_kubectl k\n</code></pre></p> <p>It might not seem like much, but this shortens <code>kubectl</code> to <code>k</code>, and if you're doing a lot of kubectl commands, this can end up being a huge time saver.</p>"}]}